<!DOCTYPE html>
<html>

<head>
    <title>Registro de alumnos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <script type="text/javascript">

      


function getCuatrimestre(){
        fetch('http://localhost:8686/api/univer/cuatrimestre/all',{
          method : 'GET',
          Headers: {
            'Accept': 'aplication/json',
            'Content-Type':'aplication/json'
          }
        })
      .then(response =>{
        if(response.ok){
          return Response.json()
        }
      })
      .then(json =>{
        console.log(json)
        var options = "<option selected> Selecciona el cuatrimestre...</option>";
        for(var i = 0; i < json.length; i++){
          console.log(json[i])
          options += "<option value="+json[i].cuatrimestre+">"+json[i].nombre+"</option>";
      }
    console.log(options)
    document.getElementById("inputGroupSelect01").innerHTML = options
    return json;
  })
  .catch(error => console.log(error))
}

        function myfuction(){

            const estudiante = {
              name: document.getElementById("name").value,
              lastName: document.getElementById("lastName").value,
              curso : document.getElementById("inputGroupSelect01").value,
            };

            console.log(estudiante)

        // fetch('http://localhost:8784/api/univer/estudiante', {
        //   method: "POST",
        //   body: JSON.stringify(estudiante),
        //   headers: { "Content-type": "application/json" }
        // }).then((response) => {
        //   if (response.ok && response.status === 201) {
        //     console.log(response);
        //     console.log("primera promesa");
        //     return response.json();
        //   }

        //   })
        //   .then (json=>{
        //     console.log("Segunda promesa");
        //         console.log(json)
        // });
        

        }
    </script>
</head>

<body>
    <h2 class="p-3">INGRESA LOS DATOS SOLICITADOS</h2>
    <form class="row g-3 padding-500">
        <div class="row g-3">
            <div class="col-auto p-3 border-radius bg-grey">
                <input type="text" class="form-control" placeholder="Ingresa el nombre" id="name" />
            </div>
            <div class="col-auto p-3 border-raidius bg-grey">
                <input type="text" class="form-control" placeholder="Ingresa el apellido" id="lastName" />
            </div>
        </div>
       
        
          <select class="form-select" id="inputGroupSelect01" aria-label="Default select example">
          <!-- <option selected>Selecciona el cuatrismestre</option>
            <option value="1">cuatrismestre 1</option>
            <option value="2">cuatrismestre 2</option>
            <option value="3">cuatrismestre 3</option>-->
            
            <script>
              const cuatrimestre = getCuatrimestre();
             /* var i =0;
              var options = "<option selected>Selecciona el cuatrimestre...</option>";
              for(var i = 0; i <10; i++){
                options += "<option value="+i+">" + i +"</option>";
              }
              document.getElementById("inputGroupSelect01").innerHTML = options;*/
            </script>
          </select>


        <div class="col-auto">
            <input class="btn btn-outline-success" onclick="myfuction()" type="button" value="Guardar">
            </input>
        </div>

    </form>
</body>

</html>